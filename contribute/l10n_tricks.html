<!DOCTYPE html>

<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tails - l10n tricks</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="icon" href="../favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="../style.css" type="text/css" />

<link rel="stylesheet" href="../local.css?reload-2021-06-25" type="text/css" />


<script src="../lib/js/mirror-dispatcher.js" type="text/javascript"></script>









</head>


<body class="en">


<div class="banner" role="banner">
  <a class="tails" href="../index.html"><span>Tails</span></a>
  <div id="search-and-donate">
    
    
    
    <div class="donate">
      <a href="https://tails.boum.org/donate/?r=topbar" class="en"><span>Donate</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="de"><span>Spenden</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="es"><span>Donar</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="fa"><span>اهدا کردن</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="fr"><span>Faire un don</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="it"><span>Dona</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="pt"><span>Faça uma doação</span></a>
      <a href="https://tails.boum.org/donate/?r=topbar" class="ru"><span>Пожертвовать</span></a>
    </div>
  </div>
</div>



<div class="topbar" role="navigation">
<ul>
  <li><a href="../index.html">Home</a></li>
  <li><a href="../about.en.html">How Tails works</a></li>
  <li><a href="../install.en.html">Get Tails</a></li>
  <li><a href="../doc.en.html">Documentation</a></li>
  <li><a href="../support.en.html">Support</a></li>
  <li><a href="../contribute.en.html">Contribute</a></li>
  <li><a href="../news.en.html">News</a></li>
  <li><a href="../jobs.html">Jobs</a></li>
</ul>


</div>



<div class="page">

<div class="pageheader">

<div class="parentlinks">
<ul id="crumbs">
<li><a href="../index.html"><img alt="home" src="../lib/home.png"></a></li>







<li><a href="../contribute.en.html">contribute</a></li>




<li>l10n tricks</li>

</ul>
</div>



<div class="header">
<span class="title">
l10n tricks
</span>
</div>






</div>

<div id="pagebody">

<div id="content" role="main">
<div class="toc">
<ol>
	<li class="L1"><a href="#index1h1">Compare the content of two PO files</a>
	</li>
	<li class="L1"><a href="#index2h1">Calculate statistics on the translations</a>
	</li>
	<li class="L1"><a href="#index3h1">Build a local copy of the website</a>
	</li>
	<li class="L1"><a href="#index4h1">Search for fuzzy strings with Vim</a>
	</li>
	<li class="L1"><a href="#index5h1">Check the validity of PO files</a>
	</li>
	<li class="L1"><a href="#index6h1">Rewrap files</a>
	</li>
	<li class="L1"><a href="#index7h1">Quickly update several repositories</a>
	</li>
	<li class="L1"><a href="#index8h1">Remove autogenerated PO files</a>
	</li>
	<li class="L1"><a href="#index9h1">List Transifex translators</a>
	</li>
	<li class="L1"><a href="#index10h1">Get an overview of translation progress</a>
	</li>
	<li class="L1"><a href="#index11h1">Build a translation memory to use with Poedit</a>
	</li>
</ol>
</div>


<h1><a name="index1h1"></a>Compare the content of two PO files</h1>

<p>Here is how to check out the differences between two PO files without
caring about strings order, line breaks or comments.</p>

<pre><code>diff -u &lt;(msgfmt -o - translation/es/es.po | msgunfmt) \
        &lt;(msgfmt -o - persistence-setup/po/es.po | msgunfmt)
</code></pre>

<p>The syntax is bash specific. Replace the paths to the two PO files you
are interested in comparing.</p>

<h1><a name="index2h1"></a>Calculate statistics on the translations</h1>

<ol>
<li>Install the <code>intltool</code> Debian package.</li>
<li>Run the <a href="./l10n_tricks/language_statistics.sh">language statistics.sh</a> script.</li>
</ol>


<h1><a name="index3h1"></a>Build a local copy of the website</h1>

<p>To check your translations before sending them, we recommend you <a href="./build/website.html">build
a local copy of the website</a>.</p>

<h1><a name="index4h1"></a>Search for fuzzy strings with Vim</h1>

<p>Ran inside Vim, the following command will search recursively for <em>fuzzy</em>
inside <em>.fr.po</em> files</p>

<pre><code>:vimgrep /fuzzy/ **/*.fr.po |:copen
</code></pre>

<p>To switch easily between the file list and the editor, using Alt + Arrow
up/down, you can add those lines in .vimrc:</p>

<pre><code>nmap &lt;silent&gt; &lt;A-Up&gt; :wincmd k&lt;CR&gt;
nmap &lt;silent&gt; &lt;A-Down&gt; :wincmd j&lt;CR&gt;
</code></pre>

<p><a id="check-po"></a></p>

<h1><a name="index5h1"></a>Check the validity of PO files</h1>

<div class="note">
Make sure you have read the <a href="./git.html#submodules">documentation about Git
submodules</a>, otherwise this might not
work properly.
</div>


<p>To check the validity of PO files, install <a href="http://jwilk.net/software/i18nspector">i18nspector</a>
by running the following command line:</p>

<pre><code>sudo apt install i18nspector
</code></pre>

<p>You can then check a single file:</p>

<pre><code>i18nspector &lt;PO file&gt;
</code></pre>

<p>or the whole wiki:</p>

<pre><code>cd wiki/src
contribute/l10n_tricks/check_po.sh
</code></pre>

<p>You can get an explaination of each error message on the <a href="https://readthedocs.org/projects/i18nspector/downloads/pdf/latest/">following documentation</a>.</p>

<h1><a name="index6h1"></a>Rewrap files</h1>

<p>To rewrap one .po file:</p>

<pre><code>msgcat --width=80 -o your_output_file.po your_input_file.po
</code></pre>

<p>To rewrap several .po files:</p>

<pre><code>for f in $(find . -type f -name .po) ; do msgcat --width=80 -o \
     &quot;${f}.new&quot; &quot;$f&quot; ; mv -f &quot;${f}.new&quot; &quot;$f&quot; ; done
</code></pre>

<p>To rewrap a .mdwn file:</p>

<pre><code>fold -s -w 80 translate.mdwn &gt; translate.mdwn.out
</code></pre>

<h1><a name="index7h1"></a>Quickly update several repositories</h1>

<p>Tails is split in <a href="./git.html">several git repositories</a>:
whisperback, persistence-setup, <em>etc</em>.</p>

<p>If you cloned those differents repositories in the same folder, you can pull them all
in a row with the following bash script:</p>

<pre><code>#!/bin/sh
    for d in $(find . -type d -name &quot;.git&quot; | sed &#39;s/\/.git\+$//&#39; ); do
       echo &quot;Current repository: $d&quot;;
       cd $d &amp;&amp; git pull &amp;&amp; cd - || exit 1
done
</code></pre>

<p>This will basically check in all subfolders if there is an existing <code>.git</code> folder,
and run <code>git pull</code> if appropriate.</p>

<h1><a name="index8h1"></a>Remove autogenerated PO files</h1>

<p>When building the wiki, ikiwiki often generates many PO files that you don&#39;t
need to take into account or commit if you are working on the documentation or
only on one language. This <a href="./l10n_tricks/git-clean-po">script</a> does a checkout on all of
the modified PO files in your working tree. <strong>Make sure to do <code>git add</code> on the
files that you modified before running it</strong>, otherwise your changes will be
lost.</p>

<h1><a name="index9h1"></a>List Transifex translators</h1>

<p>This script lists people who did translation work on Transifex.  You first need
to import those translation using the <code>./import-translations</code> script.</p>

<p>This is useful for:</p>

<ul>
<li>a team using Git to get in touch regularly with the translators on Transifex
so that they don&#39;t waste their time without anyone telling them.</li>
<li>a new team to recruit translator to work on the website.</li>
</ul>


<p>Execute from the root of the Git repository:</p>

<pre><code>./import-translations
./wiki/src/contribute/l10n_tricks/transifex_translators.sh
</code></pre>

<h1><a name="index10h1"></a>Get an overview of translation progress</h1>

<p>See <a href="https://translate.tails.boum.org/projects/tails/#languages">https://translate.tails.boum.org/projects/tails/#languages</a>
on our Weblate instance.</p>

<h1><a name="index11h1"></a>Build a translation memory to use with Poedit</h1>

<p>For example for Spanish files, from the Git repo:</p>

<pre><code>find wiki/src/ -name &quot;*.es.po&quot; &gt; allspanish &amp;&amp; \
msgcat --files-from=allspanish --output=allspanish.po
</code></pre>

<p>You can then configure it on your Poedit:</p>

<ol>
<li><em>Edit</em> &rarr; <em>Preferences</em> &rarr; <em>TM</em></li>
<li><em>Learn from files</em></li>
<li>Select your newly created file (<code>allspanish.po</code> in this case)</li>
</ol>




</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">







<div id="backlinks">
Pages linking to this one:

<a href="./how/translate/with_Git.html">how/translate/with Git</a>

<a href="../news/report_2013_01.html">news/report 2013 01</a>

<a href="../news/report_2014_06-07.html">news/report 2014 06-07</a>


</div>






</div>
<div id="mirrorlist">Mirror: <a href="https://tails.boum.org/ikiwiki.cgi?do=goto&page=contribute/l10n_tricks">tails.boum.org</a></div>

<!-- from The Amnesic Incognito Live System -->
</div>

</div>

<script type="text/javascript">
  var linkelements = document.querySelectorAll('.use-mirror-pool');
  // Avoid a traceback if mirror-dispatcher.js is not available.
  if (typeof replaceUrlPrefixWithRandomMirror !== "undefined" && linkelements.length > 0) {
    replaceUrlPrefixWithRandomMirror(linkelements);
  }
</script>

</body>
</html>
